# Лабораторная работа #2
## Чтение информации из графических файлов

### Цель работы
Разработать веб-приложение для анализа графических файлов и извлечения метаданных из различных форматов изображений.

### Задачи
- Реализовать поддержку основных графических форматов (JPEG, PNG, GIF, BMP, TIFF, PCX)
- Обеспечить чтение технических характеристик изображений
- Реализовать расчет степени сжатия для JPEG файлов
- Создать удобный интерфейс для пакетной обработки файлов

### Поддерживаемые форматы
| Формат | Чтение метаданных | Сжатие | Глубина цвета | DPI |
|--------|-------------------|--------|---------------|-----|
| JPEG | Полное | Расчет процента | Да | Да |
| PNG | Полное | Метод сжатия | Да | Да |
| GIF | Полное | Метод сжатия | Да | Нет |
| BMP | Полное | Метод сжатия | Да | Да |
| TIFF | Полное | Метод сжатия | Да | Да |
| PCX | Полное | Метод сжатия | Да | Нет |

### Реализованный функционал

#### 1. Интерфейс пользователя
- Drag & Drop зона для загрузки файлов
- Кнопки выбора файлов, папок и ZIP-архивов
- Таблица с результатами анализа
- Прогресс-бар для отслеживания обработки
- Возможность очистки результатов

#### 2. Извлекаемая информация
- Имя файла - оригинальное название
- Формат - тип графического файла
- Размер в пикселях - ширина × высота
- Размер в байтах - объем файла
- Дата изменения - временная метка
- Разрешение - плотность в DPI
- Глубина цвета - битность и каналы
- Сжатие - метод и степень сжатия
- Примечания - дополнительная информация

#### 3. Особенности реализации

##### JPEG анализ
```javascript
function calculateJpegCompression(jpegInfo, fileSize) {
    const components = jpegInfo.components || 3;
    let bytesPerPixel = 0;
    
    switch(components) {
        case 1: bytesPerPixel = precision / 8; break;
        case 3: bytesPerPixel = (precision / 8) * 1.5; break;
        case 4: bytesPerPixel = (precision / 8) * 4; break;
    }
    
    const uncompressedBytes = jpegInfo.width * jpegInfo.height * bytesPerPixel;
    const compressionRatio = (uncompressedBytes / fileSize).toFixed(1);
    const compressionPercent = Math.round((1 - (fileSize / uncompressedBytes)) * 100);
}
```

##### Парсинг метаданных
- JPEG: SOF маркеры, EXIF, JFIF
- PNG: IHDR, pHYs chunks
- BMP: Заголовок BITMAPINFOHEADER
- TIFF: IFD структуры
- GIF: Logical Screen Descriptor

### Технические особенности

#### 1. Архитектура приложения
- Чистый JavaScript без зависимостей (кроме JSZip)
- Асинхронная обработка файлов
- Потоковое чтение данных (только заголовки файлов)
- Поддержка больших файлов через Blob API

#### 2. Обработка ошибок
- Защита от битых файлов
- Graceful degradation при ошибках парсинга
- Информативные сообщения об ошибках

#### 3. Производительность
- Ограничение на количество файлов (100,000)
- Прогрессивная обработка
- Оптимизированное использование памяти

### Пример вывода для различных форматов

#### JPEG файл
```
Имя: photo.jpg
Формат: JPEG
Размер: 4000×3000 px
Размер: 2.1 MB
DPI: 300×300 dpi
Глубина: 8 bit ×3 ch
Сжатие: JPEG 85% (6.7:1)
```

#### PNG файл
```
Имя: diagram.png
Формат: PNG
Размер: 1920×1080 px
Размер: 1.5 MB
DPI: 96 dpi
Глубина: 8 bit
Сжатие: Deflate (zlib)
```

#### BMP файл
```
Имя: image.bmp
Формат: BMP
Размер: 800×600 px
Размер: 1.4 MB
DPI: -
Глубина: 24 bit
Сжатие: None
```

### Выводы

В ходе выполнения лабораторной работы было разработано веб-приложение для анализа графических файлов, которое успешно решает поставленные задачи:

1. Реализована поддержка шести основных графических форматов (JPEG, PNG, GIF, BMP, TIFF, PCX) с полным чтением метаданных

2. Создан удобный интерфейс для пакетной обработки файлов, включая поддержку Drag&Drop и работу с ZIP-архивами

3. Разработан корректный алгоритм расчета степени сжатия для JPEG файлов, учитывающий особенности цветовых моделей и субдискретизацию

4. Решены проблемы парсинга DPI информации для различных форматов, что обеспечивает полное отображение технических характеристик изображений

5. Обеспечена надежная работа приложения с большими объемами данных благодаря асинхронной обработке и оптимизированному использованию памяти

Приложение демонстрирует практическую ценность для анализа технических характеристик изображений, сравнения эффективности сжатия разных форматов и проверки соответствия изображений заданным требованиям.

Технологии: HTML5, CSS3, Vanilla JavaScript, File API, JSZip
Поддержка браузеров: Chrome, Firefox, Safari, Edge (последние версии)
